# Implementation Plan: Docusaurus UI Theme - Teal & Navy

**Branch**: `004-docusaurus-ui-theme` | **Date**: 2025-12-28 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/004-docusaurus-ui-theme/spec.md`

## Summary

Implement a professional Teal & Navy Blue theme for the Physical AI textbook Docusaurus site. The theme uses CSS custom property overrides to style the navbar, sidebar, footer, links, buttons, and admonitions while maintaining WCAG AA accessibility compliance and supporting both light and dark modes.

**Technical Approach**: Override Infima CSS variables in `custom.css` without theme ejection. Navy Blue (#1a365d) for structural elements (navbar, sidebar, footer), Teal (#0d9488) for interactive elements (links, buttons, active states).

## Technical Context

**Language/Version**: CSS3, TypeScript (Docusaurus config)
**Primary Dependencies**: Docusaurus 3.x, Infima CSS Framework (bundled)
**Storage**: N/A (styling only, no data persistence)
**Testing**: Visual testing, Lighthouse accessibility audit, browser dev tools
**Target Platform**: Modern browsers (Chrome, Firefox, Safari, Edge), responsive (320px-1920px)
**Project Type**: Web application (Docusaurus static site)
**Performance Goals**: < 100ms additional load time vs default theme
**Constraints**: WCAG AA contrast (4.5:1), no custom fonts (system stack), no theme ejection
**Scale/Scope**: 12 chapters across 4 modules, ~20 unique pages

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Applicability | Status | Notes |
|-----------|---------------|--------|-------|
| I. Educational Clarity | Applicable | PASS | Theme supports clear typography and readability for learning |
| II. Technical Accuracy | N/A | PASS | UI styling, no technical content |
| III. AI-Native Design | Applicable | PASS | Clean structure aids RAG content display |
| IV. RAG Compatibility | Applicable | PASS | Theme does not interfere with content structure |
| V. Personalization | Applicable | PASS | Consistent experience across personas |
| VI. Multi-Language | Applicable | PASS | No language-specific styling |
| VII. Reusable AI | N/A | PASS | UI only |
| VIII. Documentation Standards | Applicable | PASS | Follows Docusaurus conventions |
| IX. Ethics & Integrity | N/A | PASS | Original CSS, no copied content |
| X. Scope Control | Applicable | PASS | Focused on UI, not content |

**Post-Design Re-Check**: All principles remain compliant after design phase.

## Project Structure

### Documentation (this feature)

```text
specs/004-docusaurus-ui-theme/
├── plan.md              # This file
├── research.md          # Docusaurus theming research
├── data-model.md        # Color tokens and CSS variable mapping
├── quickstart.md        # Implementation guide with CSS code
├── checklists/
│   └── requirements.md  # Spec quality checklist
└── tasks.md             # Generated by /sp.tasks
```

### Source Code (repository root)

```text
physical-ai-textbook/docs/
├── docusaurus.config.ts     # Theme configuration (minimal changes)
└── src/
    └── css/
        └── custom.css       # ALL theme overrides (~200 lines)
```

**Structure Decision**: Single CSS file override approach. All styling contained in `custom.css` using Infima variable overrides. No additional files, components, or theme ejection required.

## Complexity Tracking

> No constitution violations. Implementation is minimal and follows Docusaurus best practices.

| Aspect | Decision | Rationale |
|--------|----------|-----------|
| Single CSS file | Selected | All overrides fit in ~200 lines, maintainable |
| No theme ejection | Selected | Preserves upgrade path, reduces complexity |
| System fonts | Selected | Better performance, no font loading |

---

## Implementation Phases

### Phase 1: Color System & Variables (Priority: P1)

**Goal**: Establish the color foundation by defining CSS custom properties

**Tasks**:
1. Define Teal primary color scale (7 variants: base, dark, darker, darkest, light, lighter, lightest)
2. Define Navy Blue custom variables (base, dark, light)
3. Define neutral palette (grays for text, borders)
4. Set typography variables (line height, font colors)
5. Configure dark mode color variants

**Files Modified**:
- `src/css/custom.css` - Add `:root` and `[data-theme='dark']` variable blocks

**Validation**:
- [ ] All colors defined in both light and dark mode
- [ ] Contrast ratios verified (WCAG AA)

---

### Phase 2: Navbar Styling (Priority: P1)

**Goal**: Navy Blue navbar with white text and Teal active indicators

**Tasks**:
1. Set navbar background to Navy Blue
2. Set navbar text/links to white
3. Add Teal hover state for links
4. Add Teal underline for active link
5. Style mobile hamburger menu
6. Test dark mode navbar (slightly darker navy)

**Files Modified**:
- `src/css/custom.css` - Add `.navbar` selector rules

**Validation**:
- [ ] Navbar displays Navy Blue background
- [ ] White text readable
- [ ] Teal hover/active states visible
- [ ] Mobile menu functional

---

### Phase 3: Sidebar Styling (Priority: P1)

**Goal**: Navy Blue sidebar with Teal active item indicators

**Tasks**:
1. Set sidebar (`.menu`) background to Navy Blue
2. Style menu links with semi-transparent white text
3. Add hover state with subtle white overlay
4. Add active state with Teal left border and background tint
5. Style collapsed/expanded states
6. Test dark mode sidebar

**Files Modified**:
- `src/css/custom.css` - Add `.menu` selector rules

**Validation**:
- [ ] Sidebar displays Navy Blue background
- [ ] Active item clearly indicated with Teal
- [ ] Hover states provide feedback
- [ ] Collapsed categories visible

---

### Phase 4: Footer Styling (Priority: P2)

**Goal**: Navy Blue footer matching navbar

**Tasks**:
1. Verify footer uses `style: 'dark'` in config
2. Override footer background to Navy Blue
3. Style footer links with white/Teal scheme
4. Style copyright text

**Files Modified**:
- `src/css/custom.css` - Add `.footer` selector rules

**Validation**:
- [ ] Footer matches navbar Navy Blue
- [ ] Links have Teal hover
- [ ] Copyright text readable

---

### Phase 5: Link & Button Styling (Priority: P2)

**Goal**: Teal links and buttons throughout content

**Tasks**:
1. Verify primary color (Teal) applies to all links
2. Add hover transition (150ms)
3. Style primary buttons (Teal background)
4. Style secondary buttons (Teal border)
5. Add focus states for accessibility

**Files Modified**:
- `src/css/custom.css` - Add `a`, `.button` selector rules

**Validation**:
- [ ] All content links appear Teal
- [ ] Hover states smooth
- [ ] Buttons styled correctly
- [ ] Focus outlines visible

---

### Phase 6: Admonition Styling (Priority: P3)

**Goal**: Teal-themed info/tip callouts, standard warning/danger

**Tasks**:
1. Override info alert to use Teal border/background
2. Override tip/success to use Teal
3. Keep warning orange-themed
4. Keep danger red-themed
5. Test in content pages

**Files Modified**:
- `src/css/custom.css` - Add `.alert--*` selector rules

**Validation**:
- [ ] Info callouts have Teal styling
- [ ] Warning/danger distinct from theme accent
- [ ] All callout types readable

---

### Phase 7: Code Block & Misc Styling (Priority: P3)

**Goal**: Styled code blocks and remaining elements

**Tasks**:
1. Style inline code with Teal-tinted background
2. Style code blocks with gray background
3. Style table of contents with Teal active
4. Style pagination navigation
5. Style search button (if Algolia used)

**Files Modified**:
- `src/css/custom.css` - Add `code`, `pre`, `.table-of-contents`, `.pagination-nav` rules

**Validation**:
- [ ] Code blocks clearly distinguished
- [ ] TOC active items visible
- [ ] Pagination styled

---

### Phase 8: Testing & Validation (Priority: P1)

**Goal**: Verify all requirements and success criteria

**Tasks**:
1. Run Lighthouse accessibility audit (target > 90)
2. Test keyboard navigation (focus states)
3. Test all 4 browsers (Chrome, Firefox, Safari, Edge)
4. Test responsive viewports (320px, 768px, 1920px)
5. Test dark mode toggle persistence
6. Verify all 12 chapters display correctly
7. Performance check (< 100ms overhead)

**Validation Checklist**:
- [ ] SC-001: WCAG AA contrast pass
- [ ] SC-002: Cross-browser compatible
- [ ] SC-003: Responsive 320-1920px
- [ ] SC-004: Dark mode toggle works
- [ ] SC-005: < 100ms load overhead
- [ ] SC-006: Hover/focus states < 150ms
- [ ] SC-007: Consistent across all pages
- [ ] SC-008: Readable for extended reading

---

## Risk Mitigation

| Risk | Mitigation |
|------|------------|
| CSS specificity conflicts | Use specific selectors, test thoroughly |
| Dark mode contrast issues | Verify contrast ratios with tools |
| Upgrade compatibility | No theme ejection, only variable overrides |
| Performance regression | Minimal CSS, no external fonts |

---

## Deliverables

1. **Updated `custom.css`**: Complete theme implementation (~200 lines)
2. **Validated Docusaurus build**: No errors or warnings
3. **Accessibility report**: Lighthouse score > 90
4. **Cross-browser verification**: 4 browsers tested
5. **Documentation**: quickstart.md with implementation details

---

## Dependencies

- Docusaurus dev server running for testing
- Browser dev tools for inspection
- Lighthouse or similar for accessibility audit

---

## Next Steps

Run `/sp.tasks` to generate detailed task list from this plan.
